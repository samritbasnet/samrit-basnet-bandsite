async function getShows() {
  try {
    const response = await bandsiteApi.getShows(); // Fetch from API

    if (!response) throw new Error("API returned undefined or null");
    if (!Array.isArray(response)) {
      console.error("API response is not an array:", response);
      return [];
    }

    return response;
  } catch (error) {
    console.error("Error fetching shows:", error);
    return []; // Return an empty array to prevent crashing
  }
}

async function renderShows() {
  const showList = document.getElementById("shows-list");
  showList.innerHTML = ""; // Clear any existing content

  const shows = await getShows(); // Fetch shows and ensure it's an array

  if (!Array.isArray(shows)) {
    console.error("Invalid show data received:", shows);
    return;
  }

  shows.forEach((show) => {
    const showElement = document.createElement("div");
    showElement.classList.add("show");

    showElement.innerHTML = `
      <h3>${show.name}</h3>
      <p>Date: ${new Date(show.date).toLocaleDateString()}</p>
      <p>Venue: ${show.venue}</p>
    `;

    showList.appendChild(showElement);
  });
}

// Ensure the page is fully loaded before rendering
document.addEventListener("DOMContentLoaded", () => {
  renderShows();
});
